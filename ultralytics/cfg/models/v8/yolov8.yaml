# Ultra-light YOLOv8n-pose v3: <9GFLOPs, ~8M params
nc: 1
kpt_shape: [21,3]
scale: "n"

backbone:
  - [[-1], 1, Conv,      [16, 3, 2]]
  - [[-1], 2, GhostConv, [32, 3, 2]]
  - [[-1], 1, SimAM,     [32]]
  - [[-1], 1, DWConv,    [64,    3, 2]]
  - [[-1], 2, C2f,       [64,  True]]
  - [[-1], 1, Conv,      [128,   3, 2]]
  - [[-1], 2, C2f,       [128, True]]
  - [[-1], 1, Conv,      [256,   3, 2]]
  - [[-1], 1, ECA,       [256,   3]]
  - [[-1], 1, SPPF,      [256,   5]]

head:
  - [[-1], 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 6], 1, Concat,    [1]]
  - [[-1], 1, Conv,         [128,   1, 1]]

  - [[-1], 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 4], 1, Concat,    [1]]
  - [[-1], 1, Conv,         [64,    1, 1]]

  - [[-1], 1, Conv,         [64,    3, 2]]
  - [[-1,12],1, Concat,     [1]]
  - [[-1], 1, Conv,         [128,   1, 1]]

  - [[-1], 1, Conv,         [128,   3, 2]]
  - [[-1, 9],1, Concat,     [1]]
  - [[-1], 1, Conv,         [256,   1, 1]]

  - [[[15,18,21]], 1, Detect, [nc]]

  - [[-1], 1, Conv,         [64,    1, 1]]
  - [[-1], 1, Pose,         [nc, kpt_shape]]
